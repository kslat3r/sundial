# sundial-hose

docker buildx build --platform linux/arm/v7,linux/amd64 . --push -t newlinelabs/sundial-hose:latest

## Useful Prometheus queries

http://localhost:9090/graph?g0.range_input=30s&g0.stacked=0&g0.expr=sum(rate(istio_requests_total%7Breporter%3D%22destination%22%2C%20destination_service_namespace%3D%22api%22%2C%20response_code%3D%22200%22%7D%5B30s%5D))%20by%20(destination_app)&g0.tab=0&g1.range_input=30s&g1.expr=sum(rate(istio_requests_total%7Breporter%3D%22destination%22%2C%20destination_service_namespace%3D%22api%22%2C%20response_code%3D~%225.*%22%7D%5B30s%5D))%20by%20(destination_app)&g1.tab=0&g2.range_input=30s&g2.expr=histogram_quantile(0.95%2C%20sum(irate(istio_request_duration_milliseconds_bucket%7Bdestination_service_namespace%3D%22api%22%2C%20destination_app%3D~%22.*-service%22%7D%5B30s%5D))%20by%20(le%2C%20destination_app))&g2.tab=0&g3.range_input=30s&g3.expr=sum(rate(container_cpu_user_seconds_total%7Bnamespace%3D%22api%22%2C%20container%3D~%22.*-service%22%7D%5B30s%5D))%20by%20(container)&g3.tab=0&g4.range_input=30s&g4.expr=sum(rate(container_memory_usage_bytes%7Bnamespace%3D%22api%22%2C%20container%3D~%22.*-service%22%7D%5B30s%5D))%20by%20(container)&g4.tab=0&g5.range_input=30s&g5.expr=avg(rate(container_cpu_user_seconds_total%7Bnamespace%3D%22api%22%2C%20container%3D~%22.*-service%22%7D%5B30s%5D))%20by%20(container)&g5.tab=0&g6.range_input=30s&g6.expr=avg(rate(container_memory_usage_bytes%7Bnamespace%3D%22api%22%2C%20container%3D~%22.*-service%22%7D%5B30s%5D))%20by%20(container)&g6.tab=0&g7.range_input=5m&g7.expr=count(container_memory_usage_bytes%7Bcontainer%3D~%22.*-service%22%2C%20namespace%3D%22api%22%7D)%20by%20(container)&g7.tab=0
